<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronologia Storica - Tracker di Eventi e Persone</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/timeline.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/study.css">
    <link rel="stylesheet" href="styles/mindmap.css">
    <link rel="stylesheet" href="styles/analytics.css">
    <link rel="stylesheet" href="styles/import.css">
    <link rel="stylesheet" href="css/export.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo">üìö Cronologia Storica</h1>
            <nav class="nav">
                <button class="nav-btn active" data-tab="timeline">Timeline</button>
                <button class="nav-btn" data-tab="events">Eventi</button>
                <button class="nav-btn" data-tab="people">Persone</button>
                <button class="nav-btn" data-tab="search">Ricerca</button>
                <button class="nav-btn" data-tab="study">Studio</button>
                <button class="nav-btn" data-tab="import">üì• Importa</button>
                <button class="nav-btn" id="export-trigger">üì¶ Import/Export</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Timeline Tab -->
            <section id="timeline-tab" class="tab-content active">
                <div class="tab-header">
                    <h2>Timeline Storica</h2>
                    <div class="controls">
                        <select id="timeline-filter" class="filter-select">
                            <option value="all">Tutti i periodi</option>
                            <option value="ancient">Antichit√†</option>
                            <option value="medieval">Medioevo</option>
                            <option value="renaissance">Rinascimento</option>
                            <option value="modern">Et√† Moderna</option>
                            <option value="contemporary">Et√† Contemporanea</option>
                        </select>
                        <button id="timeline-sort" class="btn-secondary">Ordina per data</button>
                    </div>
                </div>
                <div id="timeline-container" class="timeline-container">
                    <!-- Timeline items will be generated here -->
                </div>
            </section>

            <!-- Events Tab -->
            <section id="events-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Gestione Eventi</h2>
                    <button id="add-event-btn" class="btn-primary">+ Aggiungi Evento</button>
                </div>
                <div class="events-grid" id="events-grid">
                    <!-- Events will be displayed here -->
                </div>
            </section>

            <!-- People Tab -->
            <section id="people-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Persone Storiche</h2>
                    <button id="add-person-btn" class="btn-primary">+ Aggiungi Persona</button>
                </div>
                <div class="people-grid" id="people-grid">
                    <!-- People will be displayed here -->
                </div>
            </section>

            <!-- Search Tab -->
            <section id="search-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Ricerca Avanzata</h2>
                </div>
                <div class="search-container">
                    <div class="search-form">
                        <input type="text" id="search-input" placeholder="Cerca eventi, persone, date..." class="search-input">
                        <div class="search-filters">
                            <label>
                                <input type="checkbox" id="search-events" checked> Eventi
                            </label>
                            <label>
                                <input type="checkbox" id="search-people" checked> Persone
                            </label>
                            <select id="search-period" class="filter-select">
                                <option value="all">Tutti i periodi</option>
                                <option value="ancient">Antichit√†</option>
                                <option value="medieval">Medioevo</option>
                                <option value="renaissance">Rinascimento</option>
                                <option value="modern">Et√† Moderna</option>
                                <option value="contemporary">Et√† Contemporanea</option>
                            </select>
                        </div>
                        <button id="search-btn" class="btn-primary">Cerca</button>
                    </div>
                    <div id="search-results" class="search-results">
                        <!-- Search results will appear here -->
                    </div>
                </div>
            </section>

            <!-- Study Tab -->
            <section id="study-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Sistema di Studio Avanzato</h2>
                    <button id="open-study-btn" class="btn-primary">üéì Apri Studio</button>
                </div>
                <div class="study-preview">
                    <div class="study-features">
                        <div class="feature-card">
                            <div class="feature-icon">üìö</div>
                            <h3>Flashcard Intelligenti</h3>
                            <p>Sistema di ripetizione spaziata per memorizzare eventi e date storiche</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üß†</div>
                            <h3>Quiz Interattivi</h3>
                            <p>Test personalizzati su eventi, persone e periodi storici</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üèÜ</div>
                            <h3>Gamification</h3>
                            <p>Livelli, punti esperienza e achievement per motivare lo studio</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üìä</div>
                            <h3>Analisi Progressi</h3>
                            <p>Tracciamento dettagliato delle performance e aree di miglioramento</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üß†</div>
                            <h3>Mappe Mentali</h3>
                            <p>Crea mappe concettuali per visualizzare le connessioni storiche</p>
                            <button id="open-mindmap-btn" class="feature-action-btn">Apri Mappe Mentali</button>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üìä</div>
                            <div class="feature-content">
                                <h3>Analytics Avanzate</h3>
                                <p>Dashboard completa con analisi delle performance, predizioni AI e raccomandazioni personalizzate per ottimizzare il tuo apprendimento.</p>
                                <button class="feature-action-btn" id="open-analytics-btn">
                                    <span>üìà</span> Apri Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="study-stats-preview">
                        <h3>I tuoi progressi</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="preview-level">1</span>
                                <span class="stat-label">Livello</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="preview-streak">0</span>
                                <span class="stat-label">Giorni consecutivi</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="preview-cards">0</span>
                                <span class="stat-label">Carte studiate</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="preview-accuracy">0%</span>
                                <span class="stat-label">Precisione</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal for adding/editing events -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="event-modal-title">Aggiungi Evento</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="event-form" class="form">
                <div class="form-group">
                    <label for="event-title">Titolo *</label>
                    <input type="text" id="event-title" required>
                </div>
                <div class="form-group">
                    <label for="event-date">Data *</label>
                    <input type="date" id="event-date" required>
                </div>
                <div class="form-group">
                    <label for="event-period">Periodo Storico</label>
                    <select id="event-period">
                        <option value="ancient">Antichit√†</option>
                        <option value="medieval">Medioevo</option>
                        <option value="renaissance">Rinascimento</option>
                        <option value="modern">Et√† Moderna</option>
                        <option value="contemporary">Et√† Contemporanea</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="event-description">Descrizione</label>
                    <textarea id="event-description" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="event-location">Luogo</label>
                    <input type="text" id="event-location">
                </div>
                <div class="form-group">
                    <label for="event-people">Persone Coinvolte</label>
                    <input type="text" id="event-people" placeholder="Separa con virgole">
                </div>
                <div class="form-group">
                    <label for="event-importance">Importanza</label>
                    <select id="event-importance">
                        <option value="low">Bassa</option>
                        <option value="medium" selected>Media</option>
                        <option value="high">Alta</option>
                        <option value="critical">Critica</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancel-event">Annulla</button>
                    <button type="submit" class="btn-primary">Salva Evento</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for adding/editing people -->
    <div id="person-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="person-modal-title">Aggiungi Persona</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="person-form" class="form">
                <div class="form-group">
                    <label for="person-name">Nome *</label>
                    <input type="text" id="person-name" required>
                </div>
                <div class="form-group">
                    <label for="person-birth">Data di Nascita</label>
                    <input type="date" id="person-birth">
                </div>
                <div class="form-group">
                    <label for="person-death">Data di Morte</label>
                    <input type="date" id="person-death">
                </div>
                <div class="form-group">
                    <label for="person-role">Ruolo/Professione</label>
                    <input type="text" id="person-role">
                </div>
                <div class="form-group">
                    <label for="person-biography">Biografia</label>
                    <textarea id="person-biography" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="person-achievements">Principali Realizzazioni</label>
                    <textarea id="person-achievements" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="person-period">Periodo Storico</label>
                    <select id="person-period">
                        <option value="ancient">Antichit√†</option>
                        <option value="medieval">Medioevo</option>
                        <option value="renaissance">Rinascimento</option>
                        <option value="modern">Et√† Moderna</option>
                        <option value="contemporary">Et√† Contemporanea</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancel-person">Annulla</button>
                    <button type="submit" class="btn-primary">Salva Persona</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Learning Analytics Dashboard -->
    <div class="analytics-dashboard" id="analytics-dashboard">
        <div class="analytics-header">
            <h1 class="analytics-title">Dashboard Analytics</h1>
            <button class="analytics-close" id="analytics-close-btn">√ó</button>
        </div>
        
        <div class="analytics-nav">
            <button class="analytics-nav-btn active" data-section="overview">Panoramica</button>
            <button class="analytics-nav-btn" data-section="performance">Performance</button>
            <button class="analytics-nav-btn" data-section="learning">Apprendimento</button>
            <button class="analytics-nav-btn" data-section="collaboration">Collaborazione</button>
            <button class="analytics-nav-btn" data-section="predictions">Predizioni</button>
            <button class="analytics-nav-btn" data-section="recommendations">Raccomandazioni</button>
        </div>
        
        <div class="analytics-content">
            <!-- Overview Section -->
            <div class="analytics-section active" id="overview-section">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Sessioni Totali</span>
                            <div class="metric-icon">üìö</div>
                        </div>
                        <div class="metric-value" id="total-sessions">0</div>
                        <div class="metric-change neutral" id="sessions-change">
                            <span>‚ÜóÔ∏è</span> +0% questa settimana
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Tempo di Studio</span>
                            <div class="metric-icon">‚è±Ô∏è</div>
                        </div>
                        <div class="metric-value" id="total-study-time">0h</div>
                        <div class="metric-change neutral" id="time-change">
                            <span>‚è∞</span> Media giornaliera
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Streak Giorni</span>
                            <div class="metric-icon">üî•</div>
                        </div>
                        <div class="metric-value" id="streak-days">0</div>
                        <div class="metric-change neutral" id="streak-change">
                            <span>üìÖ</span> Giorni consecutivi
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Coinvolgimento</span>
                            <div class="metric-icon">üí™</div>
                        </div>
                        <div class="metric-value" id="engagement-score">0%</div>
                        <div class="metric-change neutral" id="engagement-change">
                            <span>üìä</span> Livello attuale
                        </div>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Attivit√† di Studio nel Tempo</h3>
                            <div class="chart-controls">
                                <button class="chart-control-btn active" data-period="7d">7g</button>
                                <button class="chart-control-btn" data-period="30d">30g</button>
                                <button class="chart-control-btn" data-period="90d">90g</button>
                            </div>
                        </div>
                        <div class="chart-content" id="activity-chart">
                            Grafico delle attivit√† di studio
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Distribuzione per Tipo di Attivit√†</h3>
                        </div>
                        <div class="chart-content" id="activity-distribution-chart">
                            Grafico a torta delle attivit√†
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Performance Section -->
            <div class="analytics-section" id="performance-section">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Accuratezza Media</span>
                            <div class="metric-icon">üéØ</div>
                        </div>
                        <div class="metric-value" id="overall-accuracy">0%</div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="accuracy-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Trend Miglioramento</span>
                            <div class="metric-icon">üìà</div>
                        </div>
                        <div class="metric-value" id="improvement-trend">Stabile</div>
                        <div class="metric-change neutral" id="trend-change">
                            <span>üìä</span> Ultime 10 sessioni
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-title">Ritenzione</span>
                            <div class="metric-icon">üß†</div>
                        </div>
                        <div class="metric-value" id="retention-rate">0%</div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="retention-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recommendations Section -->
            <div class="analytics-section" id="recommendations-section">
                <div class="recommendations-container">
                    <div class="recommendations-header">
                        Raccomandazioni Personalizzate
                    </div>
                    <div id="recommendations-list">
                        <div class="recommendation-item high-priority">
                            <div class="recommendation-priority high">Alta Priorit√†</div>
                            <div class="recommendation-message">
                                Inizia a utilizzare il sistema di analytics per ricevere raccomandazioni personalizzate!
                            </div>
                            <div class="recommendation-actions">
                                <span class="recommendation-action">Inizia una sessione di studio</span>
                                <span class="recommendation-action">Completa un quiz</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Tab -->
    <section id="import-tab" class="tab-content">
        <div class="tab-header">
            <h2>üì• Importa Dati da Testo</h2>
            <div class="controls">
                <button id="show-chatgpt-prompt" class="btn-secondary">ü§ñ Mostra Prompt ChatGPT</button>
                <button id="open-import-modal" class="btn-primary">üì• Importa Testo</button>
            </div>
        </div>
        <div class="import-info">
            <div class="info-card">
                <h3>Come funziona l'importazione</h3>
                <ol>
                    <li><strong>Prepara il testo:</strong> Copia il contenuto dai tuoi PDF o documenti di studio</li>
                    <li><strong>Usa ChatGPT (opzionale):</strong> Utilizza il prompt fornito per pre-elaborare il testo</li>
                    <li><strong>Importa:</strong> Incolla il testo e lascia che il sistema estragga automaticamente date, personaggi ed eventi</li>
                    <li><strong>Verifica:</strong> Controlla l'anteprima dei dati estratti prima dell'importazione finale</li>
                </ol>
            </div>
            <div class="info-card">
                <h3>Tipi di dati riconosciuti</h3>
                <ul>
                    <li>üìÖ <strong>Date:</strong> Anni (es. 1492), date complete (es. 12 ottobre 1492), periodi storici (es. XV secolo, Medioevo)</li>
                    <li>üë§ <strong>Personaggi:</strong> Nomi di persone storiche e figure importanti</li>
                    <li>üìù <strong>Eventi:</strong> Descrizioni di eventi storici con date associate</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Import Trigger Button -->
    <button id="import-trigger" class="import-trigger" title="Importa dati da testo">
        üì• Importa
    </button>

    <!-- Scripts -->
    <script src="js/config.js?v=1.3"></script>
        <script src="js/logger.js?v=1.3"></script>
        <script src="js/storage.js?v=1.3"></script>
        <script src="js/events.js?v=1.3"></script>
        <script src="js/people.js?v=1.3"></script>
        <script src="js/timeline.js?v=1.3"></script>
        <script src="js/search.js?v=1.3"></script>
        <script src="js/study.js?v=1.3"></script>
        <script src="js/mindmap.js?v=1.3"></script>
        <script src="js/analytics.js?v=1.3"></script>
        <script src="js/analytics-manager.js?v=1.3"></script>
        <script src="js/export-manager.js?v=1.3"></script>
        <script src="js/import-manager.js?v=1.3"></script>
        <script src="js/app.js?v=1.3"></script>
</body>
</html>